# 【緊急】403エラー解決手順

## 🔴 現在の状況
- 403エラーが発生
- ホームページが見れなくなった

---

## 🔍 原因の可能性

`.htaccess` の設定を変更したことが原因の可能性があります。

---

## 🔧 解決方法

### ステップ1: サーバーのルート `.htaccess` を確認

WinSCPでサーバーのルートディレクトリ（`/`）の `.htaccess` を確認してください。

**問題のある設定:**
```apache
# /admin/ はWordPressのリライト対象から除外
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^admin/ - [L]
</IfModule>
```

この設定がWordPressの設定より**前に**配置されている必要があります。

---

### ステップ2: `.htaccess` の設定を確認

サーバーのルート `.htaccess` の内容を確認してください。

**正しい設定の例:**
```apache
# /admin/ はWordPressのリライト対象から除外
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^admin/ - [L]
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule>
# END WordPress
```

---

### ステップ3: もし設定が間違っていた場合

**一時的な解決方法:**
1. サーバーのルート `.htaccess` をバックアップ
2. `/admin/` の除外設定を削除またはコメントアウト
3. WordPressの設定だけを残す

**修正後の設定:**
```apache
# BEGIN WordPress
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule>
# END WordPress
```

---

### ステップ4: `/admin/.htaccess` を確認

`/admin/.htaccess` の設定も確認してください。

**正しい設定:**
```apache
Options -Indexes
DirectoryIndex index.html

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /admin/
    
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /admin/index.html [L]
</IfModule>
```

---

## 📋 確認事項

1. **サーバーのルート `.htaccess` の内容を確認**
   - WordPressの設定が正しく残っているか
   - `/admin/` の除外設定が正しい位置にあるか

2. **ファイルの権限を確認**
   - `.htaccess` の権限が `644` になっているか

3. **ロリポップの管理画面で確認**
   - `.htaccess` が有効になっているか
   - エラーログを確認

---

## 🔧 緊急対応

もしホームページが全く見れない場合：

1. **サーバーのルート `.htaccess` を一時的にリネーム**
   - `.htaccess` を `.htaccess.bak` にリネーム
   - これでWordPressのデフォルト設定に戻ります

2. **ホームページが表示されるか確認**

3. **その後、`.htaccess` を修正**

---

まずは、**サーバーのルート `.htaccess` の内容を確認**して、教えてください。
