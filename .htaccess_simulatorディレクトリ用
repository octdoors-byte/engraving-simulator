# ============================================
# かわうそレザー統合用 .htaccess
# /simulator/ ディレクトリ用の設定
# ============================================

# ディレクトリインデックスの無効化
Options -Indexes

# SPAのルーティング対応（すべてのリクエストをindex.htmlにリダイレクト）
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /simulator/
    
    # ファイルが存在しない場合、index.htmlにリダイレクト
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.html [L]
</IfModule>

# 静的ファイルのキャッシュ設定
<IfModule mod_expires.c>
    ExpiresActive On
    
    # JavaScript/CSSファイル：1年間キャッシュ
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType text/css "access plus 1 year"
    
    # 画像ファイル：1年間キャッシュ
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType image/ico "access plus 1 year"
    ExpiresByType image/x-icon "access plus 1 year"
    
    # フォントファイル：1年間キャッシュ
    ExpiresByType font/woff "access plus 1 year"
    ExpiresByType font/woff2 "access plus 1 year"
    ExpiresByType application/font-woff "access plus 1 year"
    ExpiresByType application/font-woff2 "access plus 1 year"
</IfModule>

# Cache-Controlヘッダーの設定
<IfModule mod_headers.c>
    # 静的ファイルにCache-Controlヘッダーを追加
    <FilesMatch "\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$">
        Header set Cache-Control "public, max-age=31536000, immutable"
    </FilesMatch>
</IfModule>
