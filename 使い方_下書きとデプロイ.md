# 下書き作業とデプロイの使い方

## 📝 基本的な考え方

- **下書きブランチ（`draft`）**: ちょっと変更したいときはここで作業（保存だけ、サイトには反映されない）
- **本番ブランチ（`master`）**: サイトに反映したいときだけここにマージ
- **デプロイ**: GitHubのActionsタブから手動で実行（あなたが指示したときだけ）

---

## 🎯 日常的な作業フロー

### 1️⃣ 下書きで作業したいとき（保存だけ）

```bash
# 下書きブランチに切り替え（初回のみ作成）
git checkout draft

# または、まだ下書きブランチがない場合
git checkout -b draft

# ファイルを編集・保存
# （エディタで変更）

# 変更を保存（コミット）
git add .
git commit -m "下書き: 変更内容"

# 下書きブランチにプッシュ（サイトには反映されない）
git push origin draft
```

**この時点ではサイトは更新されません！** ローカルとGitHubに保存されるだけです。

---

### 2️⃣ サイトに反映したいとき（あなたが指示したとき）

#### ステップ1: 下書きをmasterにマージ

```bash
# masterブランチに切り替え
git checkout master

# 下書きの変更を取り込む
git merge draft

# masterにプッシュ
git push origin master
```

#### ステップ2: GitHubで手動デプロイ

1. GitHubリポジトリを開く
   - `https://github.com/octdoors-byte/engraving-simulator`
2. **「Actions」タブ**をクリック
3. 左側のメニューから **「Deploy to GitHub Pages」** を選択
4. 右上の **「Run workflow」** ボタンをクリック
5. ブランチを **「master」** に設定
6. **「Run workflow」** をクリック

これでサイトに反映されます！

---

## 🤖 AIへの指示方法

### 下書きで作業してほしいとき

```
「下書きブランチで○○を変更して」
「下書きで保存しておいて」
「draftブランチで作業して」
```

### サイトに反映してほしいとき

```
「サイトにアップロードして」
「本番にデプロイして」
「サイトに反映して」
「masterにマージしてデプロイして」
```

---

## 📋 よくあるパターン

### パターン1: 小さな変更を下書きで保存

```bash
git checkout draft
# ファイル編集
git add .
git commit -m "下書き: テキスト修正"
git push origin draft
```

### パターン2: 下書きを確認してから本番に反映

```bash
# 下書きで作業
git checkout draft
# ... 編集 ...
git add .
git commit -m "下書き: 新機能追加"
git push origin draft

# 確認後、本番に反映
git checkout master
git merge draft
git push origin master
# → その後、GitHubで手動デプロイ
```

### パターン3: 緊急で直接本番に反映

```bash
git checkout master
# ... 編集 ...
git add .
git commit -m "緊急修正"
git push origin master
# → その後、GitHubで手動デプロイ
```

---

## ⚠️ 注意点

- **下書きブランチ（`draft`）にプッシュしてもサイトは更新されません**
- **サイトを更新するには、必ずGitHubのActionsタブから手動でデプロイを実行してください**
- 初回は下書きブランチを作成する必要があります（下記参照）

---

## 🆕 初回セットアップ（下書きブランチ作成）

下書きブランチがまだない場合：

```bash
# masterブランチから下書きブランチを作成
git checkout master
git checkout -b draft

# 下書きブランチをGitHubにプッシュ
git push origin draft
```

これで下書きブランチが作成されました！

---

## 💡 まとめ

| 作業内容 | ブランチ | デプロイ | サイト反映 |
|---------|---------|---------|-----------|
| ちょっと変更したい | `draft` | 不要 | ❌ されない |
| サイトに反映したい | `master` | 必要（手動） | ✅ される |

**覚えておくこと：**
- 下書き = `draft`ブランチ = 保存だけ
- 本番 = `master`ブランチ + 手動デプロイ = サイトに反映
