# テンプレ生成・動作チェックリスト

このチェックリストは「テンプレート管理」から登録したテンプレートが
シミュレーター/発行/PDFで問題なく動作することを確認するためのものです。

---

## 1. 事前準備
- [ ] テンプレート管理にアクセスできる
- [ ] `template.json` と背景画像ファイルが用意できている
- [ ] 背景画像のファイル名が `template.background.fileName` と一致している
- [ ] 背景画像の実サイズと `canvasWidthPx / canvasHeightPx` の比率が一致している

### 1-A. Codexが確認できる項目（ファイル/コード）
- [ ] `template.json` の必須項目が揃っている
- [ ] `template.json` の値の範囲が仕様に一致している
- [ ] 背景画像の実サイズと `canvasWidthPx / canvasHeightPx` が一致している
- [ ] 背景画像のファイル名が `template.background.fileName` と一致している

---

## 2. テンプレート登録
- [ ] `template.json` と背景画像を同時にドラッグ&ドロップできる
- [ ] 形式エラーがない場合に登録完了メッセージが出る
- [ ] 一覧に「表示名」「テンプレキー」「状態」「更新日」が出る
- [ ] 表示名をダブルクリックで変更できる

---

## 3. テンプレート設定
- [ ] 状態を「下書き/テスト済み/公開中」で切り替えできる
- [ ] 「テスト」ボタンでテスト状態へ切り替わる
- [ ] 「スマホ表示」「PC表示」が開く
- [ ] モノクロ設定が有効/無効で切り替わる

---

## 4. 背景表示
- [ ] シミュレーター起動時に背景が表示される
- [ ] 背景がシミュレーターとPDFで同じ見え方になっている
- [ ] 背景が欠けたり伸びたりしない

---

## 5. ロゴアップロード
- [ ] ロゴをアップロードできる
- [ ] 5MB以上の画像は拒否される
- [ ] アップロード直後にプレビューが表示される
- [ ] ロゴが枠外に完全に出ないように制限される

---

## 6. トリミング
- [ ] 「トリミングを開く」でトリミング画面が開く
- [ ] トリミング後の見た目がプレビューに反映される
- [ ] トリミング結果とPDFのロゴが一致する

---

## 7. 透過（色指定）
- [ ] ロゴ画像をクリックして透過する色を選べる
- [ ] 選んだ色が「選択中」に表示される
- [ ] 「透過なし」で元に戻せる
- [ ] 透過した見た目がPDFと一致する

---

## 8. 配置
- [ ] ロゴをドラッグで移動できる
- [ ] サイズ変更ができる
- [ ] 枠外だと発行ボタンが無効になる
- [ ] 枠内だと発行ボタンが有効になる

---

## 9. PDF発行
- [ ] PDFが自動ダウンロードされる
- [ ] PDFのロゴ位置/サイズがプレビューと一致する
- [ ] デザインIDがPDFに表示される
- [ ] 発行後に履歴に追加される

### 9-A. Codexが確認できる項目（コード）
- [ ] PDF生成で背景は縦横比を維持して描画される
- [ ] PDF生成で枠とロゴは同じ座標系（canvas基準）で描画される
- [ ] PDF生成で背景/ロゴが常にcontainで配置される

---

## 10. デザイン履歴
- [ ] 履歴からPDFを再ダウンロードできる
- [ ] デザイン情報が正しく表示される

---

## Codex対応の事前チェック（実行例）
1) `template.json` と背景画像ファイルのパスを共有  
2) Codexが以下を確認  
   - JSONの必須項目/値チェック  
   - 背景画像サイズ取得  
   - `canvasWidthPx/HeightPx` の一致判定  
   - ファイル名一致判定
